<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>JAMEEL | Premium Desi Boutique</title>
    <script src="https://identity.netlify.com/v1/netlify-identity-widget.js"></script>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Playfair+Display:wght@700&family=Poppins:wght@300;400;600&family=Noto+Nastaliq+Urdu&display=swap');

        body { font-family: 'Poppins', sans-serif; background-color: #ffffff; color: #1a1a1a; }
        .urdu { font-family: 'Noto Nastaliq Urdu', serif; direction: rtl; line-height: 2; }
        
        /* Navbar Styling */
        .navbar { border-bottom: 1px solid #eee; background: white !important; }
        .navbar-brand { font-family: 'Playfair Display', serif; letter-spacing: 2px; color: #000 !important; font-size: 1.5rem; }

        /* Hero Section */
        .hero { padding: 80px 0; background: #f9f9f9; margin-bottom: 40px; }
        .hero h1 { font-family: 'Playfair Display', serif; font-size: 3rem; text-transform: uppercase; }

        /* Category Filter */
        .filter-btn { border: none; background: none; padding: 10px 20px; font-weight: 600; text-transform: uppercase; font-size: 0.8rem; letter-spacing: 1px; color: #888; transition: 0.3s; }
        .filter-btn:hover, .filter-btn.active { color: #000; border-bottom: 2px solid #000; }

        /* Product Grid */
        .product-item { position: relative; margin-bottom: 30px; transition: 0.4s; }
        .img-wrapper { overflow: hidden; position: relative; }
        .product-img { width: 100%; height: 450px; object-fit: cover; transition: transform 0.6s ease; }
        .product-item:hover .product-img { transform: scale(1.05); }
        
        .product-info { padding: 15px 0; text-align: left; }
        .product-title { font-size: 1rem; font-weight: 600; margin-bottom: 5px; text-transform: uppercase; }
        .product-price { font-size: 0.95rem; color: #444; }
        
        .buy-btn { 
            background: #000; color: #fff; border: none; padding: 12px; width: 100%; 
            text-transform: uppercase; font-size: 0.8rem; letter-spacing: 1px; 
            margin-top: 10px; transition: 0.3s;
        }
        .buy-btn:hover { background: #333; }

        .badge-new { position: absolute; top: 15px; left: 15px; background: #000; color: #fff; padding: 5px 15px; font-size: 0.7rem; z-index: 10; text-transform: uppercase; }

        #loader { min-height: 300px; display: flex; align-items: center; justify-content: center; flex-direction: column; }
    </style>
</head>
<body>

    <nav class="navbar navbar-expand-lg sticky-top">
        <div class="container">
            <a class="navbar-brand" href="#">JAMEEL</a>
            <div data-netlify-identity-button></div>
        </div>
    </nav>

    <section class="hero text-center">
        <div class="container">
            <h1 class="mb-2">New Arrivals</h1>
            <p class="text-muted">Explore our latest premium collections</p>
        </div>
    </section>

    <div class="container mb-5">
        <div class="d-flex justify-content-center flex-wrap mb-5 border-bottom">
            <button class="filter-btn active" onclick="filterCategory('All')">All</button>
            <button class="filter-btn" onclick="filterCategory('Summer')">Summer</button>
            <button class="filter-btn" onclick="filterCategory('Winter')">Winter</button>
            <button class="filter-btn" onclick="filterCategory('Mardana')">Mardana</button>
            <button class="filter-btn" onclick="filterCategory('Zanana')">Zanana</button>
        </div>

        <div id="product-grid" class="row">
            <div id="loader">
                <div class="spinner-border text-dark"></div>
                <p class="mt-3 text-uppercase small letter-spacing-1">Syncing Boutique...</p>
            </div>
        </div>
    </div>

    <footer class="py-5 border-top text-center">
        <h2 class="navbar-brand mb-4 d-block">JAMEEL</h2>
        <div class="mb-4">
            <a href="#" class="mx-3 text-dark"><i class="fab fa-instagram fa-lg"></i></a>
            <a href="#" class="mx-3 text-dark"><i class="fab fa-facebook-f fa-lg"></i></a>
        </div>
        <p class="small text-muted">&copy; 2026 Jameel Clothing Store. All Rights Reserved.</p>
    </footer>

    <script>
        let allProducts = [];

        async function loadStore() {
            try {
                // UPDATE THESE TO YOUR ACTUAL GITHUB INFO
                const response = await fetch("https://api.github.com/repos/Subyyal/Jameelsclothingstore/contents/data/products");
                const files = await response.json();
                
                const grid = document.getElementById('product-grid');
                grid.innerHTML = ""; // Clear loader

                for (const file of files) {
                    if (file.name.endsWith('.json')) {
                        const res = await fetch(file.download_url);
                        const item = await res.json();
                        allProducts.push(item);
                    }
                }
                displayProducts(allProducts);
            } catch (e) {
                console.error(e);
                document.getElementById('product-grid').innerHTML = "<p class='text-center'>Please upload products via /admin panel.</p>";
            }
        }

        function displayProducts(products) {
            const grid = document.getElementById('product-grid');
            grid.innerHTML = "";
            
            products.forEach(suit => {
                grid.innerHTML += `
                    <div class="col-lg-3 col-md-4 col-sm-6 product-item">
                        <div class="badge-new">New</div>
                        <div class="img-wrapper">
                            <img src="${suit.image}" class="product-img" alt="${suit.title}">
                        </div>
                        <div class="product-info">
                            <div class="product-title">${suit.title}</div>
                            <div class="urdu mb-1" style="font-size: 0.8rem;">${suit.urdu_name || ''}</div>
                            <div class="product-price">PKR ${suit.price}</div>
                            <a href="https://wa.me/923000000000?text=Salam, I am interested in ${suit.title}" class="btn buy-btn">
                                <i class="fab fa-whatsapp me-2"></i> Inquiry
                            </a>
                        </div>
                    </div>
                `;
            });
        }

        function filterCategory(cat) {
            // Update active button UI
            const buttons = document.querySelectorAll('.filter-btn');
            buttons.forEach(btn => btn.classList.remove('active'));
            event.target.classList.add('active');

            if(cat === 'All') {
                displayProducts(allProducts);
            } else {
                const filtered = allProducts.filter(p => p.category === cat);
                displayProducts(filtered);
            }
        }

        loadStore();

        if (window.netlifyIdentity) {
            window.netlifyIdentity.on("init", user => {
                if (!user) {
                    window.netlifyIdentity.on("login", () => { document.location.href = "/admin/"; });
                }
            });
        }
    </script>
</body>
</html>